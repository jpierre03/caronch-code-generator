--
-- CARONCH Language definition
-- 2015
--

-- test a file with :
--
-- bnfc -m --haskell caronch-v2.cf && make -j4 && ./TestCaronchV example-v2.caronch
--

-- A Caronch is a set of items

TCaronch     .   Caronch ::= [Item];

-- Items are : Process, Properties

Process     .   Item ::=    Id ":" "(" [Data] ")" "->" "(" [Data] ")";
Properties  .   Item ::=    Id "{" [Propertie] "}";

TData        .   Data    ::= Id;
TKey         .   Key     ::= String;
TValue       .   Value   ::= String;

KV          .   Propertie ::= Key       "=" Value;
KV_label    .   Propertie ::= "label"   "=" Value;

-- Helpers
(:[])       .   [Item]  ::= Item;
(:)         .   [Item]  ::= Item [Item];

(:[])       .   [Propertie]  ::= Propertie;
(:)         .   [Propertie]  ::= Propertie "," [Propertie];

(:[])       .   [Data]  ::= Data;
(:)         .   [Data]  ::= Data [Data];
terminator Data "";

-- A valid identifier start by a letter followed by nore or + letter, digit.

token       Id  letter (letter | digit | '_' | '\'')*;

-- Define comments
--
-- comments are discarded by parser.

comment     "/*"    "*/"    ;
comment     "//"            ;
